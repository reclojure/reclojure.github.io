{"version":3,"sources":["lambdaisland/glogi/console.cljs"],"mappings":"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","names":["js/goog.define","lambdaisland.glogi.console/colorize","lambdaisland.glogi.console/log-method","level","pred__50226","p1__50225#","p2__50224#","expr__50227","lambdaisland.glogi/level-value","p__50232","map__50233","cljs.core/--destructure-map","cljs.core.get","lambdaisland.glogi.console/format-raw","logger-name","message","exception","p__50237","map__50238","lambdaisland.glogi.console/format-css","lambdaisland.glogi.print/format","p__50240","map__50242","lambdaisland.glogi.console/format-plain","cljs.core.pr_str","lambdaisland.glogi.console/make-console-log","format","p__50243","map__50244","record","method-name","method","or__4223__auto__","goog.object/get","js/console","js/console.log","cljs.core.apply","G__50245","G__50246","G__50247","G__50248","js/lambdaisland","js/lambdaisland.glogi","js/lambdaisland.glogi.console","js/lambdaisland.glogi.console.console-log-raw","lambdaisland.glogi.console/console-log-raw","js/lambdaisland.glogi.console.console-log-css","lambdaisland.glogi.console/console-log-css","js/lambdaisland.glogi.console.console-log-plain","lambdaisland.glogi.console/console-log-plain","js/lambdaisland.glogi.console.format","lambdaisland.glogi.console/format","js/lambdaisland.glogi.console.console-log","lambdaisland.glogi.console/console-log","lambdaisland.glogi.console/devtools-installed?","and__4221__auto__","js/devtools","js/devtools.core","js/devtools.core.installed_QMARK_","lambdaisland.glogi.console/browser?","js/window","lambdaisland.glogi.console/ie?","js/window.navigator","js/window.navigator.userAgent","lambdaisland.glogi.console/select-handler","G__50255","js/Error","lambdaisland.glogi.console/install!","temp__5753__auto__","instance","goog.debug.Console/instance","G__50259","lambdaisland.glogi/add-handler-once"],"sourcesContent":["(ns lambdaisland.glogi.console\n  (:require [lambdaisland.glogi :as glogi]\n            [lambdaisland.glogi.print :as print]\n            [goog.object :as gobj]\n            [goog.debug.LogBuffer :as LogBuffer]\n            [goog.debug.Console :as Console]))\n\n;; By default we do CSS colorization on non-IE browsers only. You can change\n;; this in your build with :closure-defines. Possible values: \"auto\" \"true\" \"false\"\n(goog-define colorize \"auto\")\n\n(defn log-method [level]\n  (condp #(>= %2 %1) (glogi/level-value level)\n    (glogi/level-value :severe)  \"error\"\n    (glogi/level-value :warning) \"warn\"\n    (glogi/level-value :info)    \"info\"\n    (glogi/level-value :config)  \"log\"\n    \"log\"))\n\n(defn format-raw [{:keys [level logger-name message exception]}]\n  [(str \"[\" logger-name \"]\") message])\n\n(defn format-css [{:keys [level logger-name message exception]}]\n  (print/format level logger-name message))\n\n(defn format-plain [{:keys [level logger-name message exception]}]\n  [(str \"[\" logger-name \"]\") (pr-str message)])\n\n(defn make-console-log [format]\n  (fn [{:keys [logger-name level exception] :as record}]\n    (let [method-name (log-method level)\n          method      (or (gobj/get js/console method-name)\n                          js/console.log)]\n      (apply method (format record))\n      (when exception\n        (method (str \"[\" logger-name \"]\") (str exception) \"\\n\" (.-stack exception))))))\n\n(defonce console-log-raw (make-console-log format-raw))\n(defonce console-log-css (make-console-log format-css))\n(defonce console-log-plain (make-console-log format-plain))\n\n;; backward compatibility\n(defonce format format-plain)\n(defonce console-log console-log-plain)\n\n(defn devtools-installed? []\n  (and (exists? js/devtools.core.installed_QMARK_)\n       (js/devtools.core.installed_QMARK_)))\n\n(defn- browser? []\n  (exists? js/window))\n\n(defn- ie? []\n  (and (browser?)\n       (exists? js/window.navigator)\n       (exists? js/window.navigator.userAgent)\n       ;; IE and pre-chromium EDGE don't support %c\n       (or (> (.indexOf js/window.navigator.userAgent \"MSIE\") -1)\n           (> (.indexOf js/window.navigator.userAgent \"Trident\") -1))))\n\n(defn select-handler []\n  (case colorize\n    \"auto\"\n    (cond\n      (devtools-installed?)        console-log-raw\n      (and (browser?) (not (ie?))) console-log-css\n      :else                        console-log-plain)\n    \"raw\"\n    console-log-raw\n    \"true\"\n    console-log-css\n    \"false\"\n    console-log-plain))\n\n(defn install! []\n  ;; Disable goog.debug.Console if it's been enabled (e.g. by Figwheel), we do\n  ;; console logging now\n  (when-let [instance Console/instance]\n    (.setCapturing instance false))\n\n  (glogi/add-handler-once (select-handler)))\n"]}